<aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
  <div class="app-brand demo">
    <a href="/" class="app-brand-link">
      <!-- <span class="app-brand-logo demo"> -->
      <img src="/logo.png" alt="" style="width: 50px; height: 50px;">
      <!-- </span> -->
      <span class="app-brand-text fw-bold">
        <%= user.service_code %>
      </span>
    </a>

    <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto">
      <i class="ti menu-toggle-icon d-none d-xl-block align-middle"></i>
      <i class="ti ti-x d-block d-xl-none ti-md align-middle"></i>
    </a>
  </div>

  <div class="menu-inner-shadow"></div>

  <ul class="menu-inner py-1">
    <!-- Dashboards -->
  <% var link='/admin/dashboard' ; %>
    <li class="menu-item <%= link === '/admin/dashboard' ? 'active' : '' %>">
      <a href="/admin/dashboard" class="menu-link">
        <i class="menu-icon tf-icons ti ti-smart-home"></i>
        <div data-i18n="Dashboard">Dashboard</div>
      </a>
    </li>


    <!-- Extended components -->
    <% 
        // Define all menu structures
        const settings = new Set(["/setup/ticket_item", "/setup/state", "/setup/ward", "/admin/user_group", "/admin/permission", "/setup/inter_switch", "/setup/street"]);
        const rolesPermissions = new Set(["/admin/user_group", "/admin/permission"]);
        const payments = new Set(["/setup/inter_switch"]);
        const revenues = new Set(["/setup/ticket_item"]);
        const locations = new Set(["/setup/state", "/setup/ward", "/setup/street"]);
        const assessments = new Set(["/admin/revenue_upload"]);
        const enumeration = new Set(["/admin/enumerated_panel", "/admin/enumerated_buildings", "/admin/enumerated_business", "/admin/generate_mandate"]);
        const ticket = new Set(["/admin/payment_reconciliation"]);
        const users = new Set(["/admin/user_group"]);
        const wallet = new Set(["/wallet", "/wallet/reports"]);
        const reports = new Set(["/report/payment_reports", "/report/revenue_assessments_reports", "/report/ticket_report"]);
        const building = new Set(["/setup/building_categories", "/setup/building_types"]);
        const business = new Set(["/setup/business_categories", "/setup/business_types", "/setup/business_sizes", "/setup/business_sector", "/setup/business_operations"]);

        // Helper function to check active/open state
        const isActive = (urlsSet) => {
            return urlsSet.has(link) ? "active open" : "";
        };
    %>
  
      <li class="menu-item <%= isActive(settings) %>">
        <a href="javascript:void(0)" class="menu-link menu-toggle">
          <i class="menu-icon tf-icons ti ti-components"></i>
          <div data-i18n="Settings <%= isActive(settings) %>">Settings </div>
        </a>
        <ul class="menu-sub">
      
          <!-- Roles & Permissions -->
          <li class="menu-item <%= isActive(rolesPermissions) %>">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <div data-i18n="Roles & Permission">Roles & Permission</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item <%= link === '/admin/user_group' ? 'active' : '' %>">
                <a href="/admin/user_group" class="menu-link">
                  <div data-i18n="User Roles">User Roles</div>
                </a>
              </li>
              <li class="menu-item <%= link === '/admin/permission' ? 'active' : '' %>">
                <a href="/admin/permission" class="menu-link">
                  <div data-i18n="Permission">Permission</div>
                </a>
              </li>
            </ul>
          </li>
      
          <!-- Payment Setup -->
          <li class="menu-item <%= isActive(payments) %>">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <div data-i18n="Payment Setup">Payment Setup</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item <%= link === '/setup/inter_switch' ? 'active' : '' %>">
                <a href="/setup/inter_switch" class="menu-link">
                  <div data-i18n="Interswitch">Interswitch</div>
                </a>
              </li>
            </ul>
          </li>
      
          <!-- Revenue Items -->
          <% if (user?.permissions?.includes('59')) { %>
            <li class="menu-item <%= isActive(revenues) %>">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                <div data-i18n="Revenue Items">Revenue Items</div>
              </a>
              <ul class="menu-sub">
                <li class="menu-item <%= link === '/setup/ticket_item' ? 'active' : '' %>">
                  <a href="/setup/ticket_item" class="menu-link">
                    <div data-i18n="Revenue Items">Revenue Items</div>
                  </a>
                </li>
              </ul>
            </li>
          <% } %>
      
          <!-- Location Setup -->
          <li class="menu-item <%= isActive(locations) %>">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <div data-i18n="Location Setup">Location Setup</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item <%= link === '/setup/state' ? 'active' : '' %>">
                <a href="/setup/state" class="menu-link">
                  <div data-i18n="State">State</div>
                </a>
              </li>
              <li class="menu-item <%= link === '/setup/ward' ? 'active' : '' %>">
                <a href="/setup/ward" class="menu-link">
                  <div data-i18n="Ward">Ward</div>
                </a>
              </li>
              <li class="menu-item <%= link === '/setup/street' ? 'active' : '' %>">
                <a href="/setup/street" class="menu-link">
                  <div data-i18n="Street">Street</div>
                </a>
              </li>
            </ul>
          </li>
          <!-- Building Menu -->
          <li class="menu-item <%= isActive(building) %>">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <div data-i18n="Building">Building Setup</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item <%= link === '/setup/building_categories' ? 'active' : '' %>">
                <a href="/setup/building_categories" class="menu-link">
                  <div data-i18n="Building Categories">Building Categories</div>
                </a>
              </li>
              <li class="menu-item <%= link === '/setup/building_types' ? 'active' : '' %>">
                <a href="/setup/building_types" class="menu-link">
                  <div data-i18n="Building Types">Building Types</div>
                </a>
              </li>
            </ul>
          </li>
          
          <!-- Business Menu -->
          <li class="menu-item <%= isActive(business) %>">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <div data-i18n="Business">Business</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item <%= link === '/setup/business_categories' ? 'active' : '' %>">
                <a href="/setup/business_categories" class="menu-link">
                  <div data-i18n="Business Categories">Business Categories</div>
                </a>
              </li>
              <li class="menu-item <%= link === '/setup/business_types' ? 'active' : '' %>">
                <a href="/setup/business_types" class="menu-link">
                  <div data-i18n="Business Types">Business Types</div>
                </a>
              </li>
              <li class="menu-item <%= link === '/setup/business_sizes' ? 'active' : '' %>">
                <a href="/setup/business_sizes" class="menu-link">
                  <div data-i18n="Business Sizes">Business Sizes</div>
                </a>
              </li>
              <li class="menu-item <%= link === '/setup/business_sector' ? 'active' : '' %>">
                <a href="/setup/business_sector" class="menu-link">
                  <div data-i18n="Business Sector">Business Sector</div>
                </a>
              </li>
              <li class="menu-item <%= link === '/setup/business_operations' ? 'active' : '' %>">
                <a href="/setup/business_operations" class="menu-link">
                  <div data-i18n="Business Operations">Business Operations</div>
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
  
        <li class="menu-item <%= isActive(assessments) %>">
          <a href="javascript:void(0);" class="menu-link menu-toggle">
            <i class="menu-icon tf-icons ti ti-file"></i>
            <div data-i18n="Assessment Revenue">Assessment Revenue</div>
          </a>
          <ul class="menu-sub">
            <li class="menu-item <%= link == '/admin/revenue_upload' ? 'active' : link=='/admin/revenue_upload/view/'+new Date().getFullYear() ? 'active' : '' %>">
              <a href="/admin/revenue_upload" class="menu-link">
                <div data-i18n="Revenue">Revenue</div>
              </a>
            </li>
           
          </ul>
        </li>

        <li class="menu-item <%= isActive(enumeration)  %>">
          <a href="javascript:void(0);" class="menu-link menu-toggle">
            <i class="menu-icon tf-icons ti ti-file"></i>
            <div data-i18n="Enumeration">Enumeration</div>
          </a>
          <ul class="menu-sub">
            <li class="menu-item <%= link === '/admin/enumerated_panel' ? 'active' : '' %>">
              <a href="/admin/enumerated_panel" class="menu-link">
                <div data-i18n="Enumerated Panel">Enumerated Panel</div>
              </a>
            </li>
            <li class="menu-item <%= link === '/admin/enumerated_buildings' ? 'active' : '' %>">
              <a href="/admin/enumerated_buildings" class="menu-link">
                <div data-i18n="Enumerated Buildings">Enumerated Buildings</div>
              </a>
            </li>
            <li class="menu-item <%= link === '/admin/enumerated_business' ? 'active' : '' %>">
              <a href="/admin/enumerated_business" class="menu-link">
                <div data-i18n="Enumerated Business">Enumerated Business</div>
              </a>
            </li>
            <li class="menu-item <%= link === '/admin/generate_mandate' ? 'active' : '' %>">
              <a href="/admin/generate_mandate" class="menu-link">
                <div data-i18n="Generate Mandate">Generate Mandate</div>
              </a>
            </li>
            <li class="menu-item">
              <a href="app-ecommerce-customer-details-notifications.html" class="menu-link">
                <div data-i18n="Mandate Invoices">Mandate Invoices</div>
              </a>
            </li>
          </ul>
        </li>

        <li class="menu-item  <%= isActive(ticket)  %>">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons ti ti-credit-card"></i>
              <div data-i18n="Ticket Payment">Ticket Payment</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item <%= link == '/admin/payment_reconciliation' ? 'active' : '' %>">
                <a href="/admin/payment_reconciliation" class="menu-link">
                  <div data-i18n="Upload ticket payments">Upload ticket payments</div>
                </a>
              </li>
            </ul>
        </li>
          <% if (user?.permissions?.includes('51')) { %>
            <li class="menu-item <%= isActive(reports)  %>">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                <i class="menu-icon tf-icons ti ti-chart-pie"></i>
                <div data-i18n="Report">Report</div>
              </a>
              <ul class="menu-sub">
                <li class="menu-item <%= link == '/report/payment_reports' ? 'active' : '' %>">
                  <a href="/report/payment_reports" class="menu-link">
                    <div data-i18n="Payment Report">Payment Report</div>
                  </a>
                </li>
                <li class="menu-item <%= link == '/report/revenue_assessments_reports' ? 'active' : '' %>">
                  <a href="/report/revenue_assessments_reports" class="menu-link">
                    <div data-i18n="Assessment report">Assessment report</div>
                  </a>
                </li>
                <li class="menu-item <%= link == '/report/generated_mandate_reports' ? 'active' : '' %>">
                  <a href="/report/generated_mandate_reports" class="menu-link">
                    <div data-i18n="Assessment report">Enumerated revenue report</div>
                  </a>
                </li>
                <li class="menu-item <%= link == '/report/ticket_report' ? 'active' : '' %>">
                  <a href="/report/ticket_report" class="menu-link">
                    <div data-i18n="Ticket report">Ticket report</div>
                  </a>
                </li>
              </ul>
            </li>
          <% } %>
          <% if (user?.permissions?.includes('60')) { %>
            <li class="menu-item <%= isActive(users) %>">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                <i class="menu-icon tf-icons ti ti-users"></i>
                <div data-i18n="Users">Users</div>
              </a>
              <ul class="menu-sub">

                <li class="menu-item <%= link == " /admin/user" ? "active" : "" %>">
                  <a href="/admin/user" class="menu-link">
                    <div data-i18n="Users">Users</div>
                  </a>
                </li>
              </ul>
            </li>
          <% }%>
          <% if (user?.permissions?.includes('48')) { %>
            <li class="menu-item <%= isActive(wallet) %>">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                <i class="menu-icon tf-icons ti ti-credit-card"></i>
                <div data-i18n="Wallet">Wallet</div>
              </a>
              <ul class="menu-sub">
                <li class="menu-item <%= link == '/wallet' ? 'active' : '' %>">
                  <a href="/wallet" class="menu-link">
                    <div data-i18n="Wallet">Wallet</div>
                  </a>
                </li>
              </ul>
            </li>
          <% } %>
        <!-- Misc -->
  </ul>
</aside>

<div id="cover-spin"></div>