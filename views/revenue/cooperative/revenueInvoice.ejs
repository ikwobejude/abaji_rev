<!doctype html>

<html lang="en" class="light-style layout-navbar-fixed layout-menu-fixed layout-compact" dir="ltr"
    data-theme="theme-default" data-assets-path="/assets/" data-template="vertical-menu-template" data-style="light">

<head>
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.min.css">

    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

    <%- include('../../layout/head') %>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
</head>

<body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
        <div class="layout-container">
            <!-- Menu -->

            <%- include('../../layout/aside') %>
                <!-- / Menu -->

                <!-- Layout container -->
                <div class="layout-page">
                    <!-- Navbar -->

                    <%- include('../../layout/side') %>

                        <!-- / Navbar -->

                        <!-- Content wrapper -->
                        <div class="content-wrapper">
                            <!-- Content -->

                            <div class="container-xxl flex-grow-1 container-p-y">
                                <div class="card p-5">
                                    <div class="card-header">Search </div>
                                    <div class="row">

                                    </div>
                                </div>

                                <hr class="my-5" />

                                <!-- DataTable with Buttons -->
                                <div class="card">
                                    <div class="card-header">
                                        <div class="row">
                                        </div>
                                    </div>

                                    <div class="card-datatable  table-responsive pt-0 p-5">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th></th>
                                                    <th>Invoice</th>
                                                    <th>Year</th>
                                                    <th>Revenue Name</th>
                                                    <th>Business Name</th>
                                                    <th>Status</th>
                                                    <th>Amount Paid</th>
                                                    <th>Payment Date</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <% revenue.forEach(item=> { %>
                                                    <tr>
                                                        <td>
                                                            <a class="text-primary" href="javascript:void(0);"
                                                                onclick="printBill('<%= item.bill_ref_no %>')">
                                                                <i class="bi bi-printer"></i>
                                                            </a>
                                                        </td>
                                                        <td>
                                                            <%= item.bill_ref_no %>
                                                        </td>
                                                        <td>
                                                            <%= item.rate_year %>
                                                        </td>
                                                        <td>
                                                            <%= item.revenue_type %>
                                                        </td>
                                                        <td>
                                                            <%= item.name_of_business %>
                                                        </td>

                                                        <td>
                                                            <%= item.status===1 ? 'Part Payment' : 'Fully Paid' %>
                                                        </td>
                                                        <td>
                                                            <%= new Intl.NumberFormat('en-NG', { style: 'currency' ,
                                                                currency: 'NGN' }).format(item.amount_paid) %>
                                                        </td>
                                                        <td>
                                                            <%= new Date(item.payment_date).toLocaleDateString() %>
                                                        </td>
                                                    </tr>
                                                    <% }) %>
                                            </tbody>
                                        </table>

                                    </div>
                                    <%- include('pagination') %>
                                </div>






                            </div>
                            <!-- / Content -->

                            <%- include('../../layout/footer') %>
                                <!-- Page JS -->
                                <script
                                    src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
                                <script src="/assets/js/tables-datatables-basic.js"></script>
                                <script src="/custom/revenue_invoice.js"></script>
                                <!-- jQuery (Required for DataTables) -->
                                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

                                <!-- DataTables JS -->
                                <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
                                <script
                                    src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
                                <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                                <script
                                    src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                                <script
                                    src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
                                <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
                                <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.min.js"></script>
                                <script>
                                    $(document).ready(function () {
                                        $(".table").DataTable({
                                            paging: false,
                                            ordering: false,
                                            searching: false,
                                            info: false,
                                            lengthChange: false,
                                            destroy: true,
                                            dom: "Bfrtip",
                                            buttons: [
                                                { extend: "copy", className: "btn btn-secondary" },
                                                { extend: "csv", className: "btn btn-primary" },
                                                { extend: "pdf", className: "btn btn-danger" },
                                                { extend: "print", className: "btn btn-success" }
                                            ]
                                        });
                                    });
                                </script>

                                <!-- <script>
        document.addEventListener("DOMContentLoaded", () => {
            const currentYear = new Date().getFullYear();
            const searchForm = document.getElementById("search-form");
            searchForm.action = `revenue_upload/view/${currentYear}`;
        });
    </script> -->
</body>

</html>